/*
______________________________________
|\   ____\|\   __  \|\   ___ \|\  ___ \               
\ \  \___|\ \  \|\  \ \  \_|\ \ \   __/|              
 \ \  \    \ \  \\\  \ \  \ \\ \ \  \_|/__            
  \ \  \____\ \  \\\  \ \  \_\\ \ \  \_|\ \           
   \ \_______\ \_______\ \_______\ \_______\          
    \|_______|\|_______|\|_______|\|_______|       
 */

package PapaPong;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.AffineTransform;

public class ComPaddle {
	private int x = 0;
	private int xSpeed = 1;
	private int y = 100;
	private int ySpeed = 1;
	private int waitCount = 0;
	private double rotateAngle = 0.0;
	private Dimension dimension = new Dimension();
	private Game game;

	public ComPaddle(Game game) {
		this.game = game;
	}

	public void newGame() {
		x = 0;
		xSpeed = 1;
		y = 100;
		ySpeed = 1;
	}

	public void move() {
		if (!collision() && waitCount == 0) {
			if (checkBoundsX()) {
				x = x + xSpeed;
			} else {
				xSpeed *= -1;
				x = x + xSpeed;
			}
			if (checkBoundsY()) {
				y = y + ySpeed;
			} else {
				ySpeed *= -1;
				y = y + ySpeed;
			}
		} else {
			waitCount++;
			if (waitCount == 2) {
				waitCount = 0;
				xSpeed *= -1;
				x = x + xSpeed;
				ySpeed *= -1;
				y = y + ySpeed;
			}
		}
	}

	public boolean checkBoundsX() {
		boolean check = false;
		if (x + xSpeed > 0
				&& x + xSpeed < game.getWidth() - dimension.racquetWidth) {
			check = true;
		}
		return check;
	}

	public boolean checkBoundsY() {
		boolean check = false;
		if (y + ySpeed > 0 && y + ySpeed < 400 - dimension.racquetHeight) {
			check = true;
		}
		return check;
	}

	public void paint(Graphics2D g) {
		g.setColor(Color.MAGENTA);
		AffineTransform rotate = AffineTransform.getRotateInstance(rotateAngle,
				x, y);
		if (rotate != null) {
			g.setTransform(rotate);
		}
		g.fillRect(x, y, dimension.racquetWidth, dimension.racquetHeight);
	}

	public Rectangle getBounds() {
		return new Rectangle(x, y, dimension.racquetWidth,
				dimension.racquetHeight);
	}

	private boolean collision() {
		return game.ball.getBounds().intersects(getBounds());
	}

	public int getComX() {
		return x;
	}

	public int getComY() {
		return y;
	}

	public boolean checkPaddleBounds() {
		boolean check = false;
		if (y > dimension.HEIGHT / 2 - dimension.wallWidth) {
			check = true;
		}
		return check;
	}

	public int getWidth() {
		return dimension.racquetWidth;
	}

	public int getHeight() {
		return dimension.racquetHeight;
	}
}

/*
 * int ballSpeedX = Math.abs(game.ball.ballX); int ballSpeedY =
 * Math.abs(game.ball.ballY); if (xSpeed < 0) { xSpeed = -ballSpeedX; } else {
 * xSpeed = ballSpeedX; } if (ySpeed < 0) { ySpeed = -ballSpeedY; } else {
 * ySpeed = ballSpeedY; }
 */
